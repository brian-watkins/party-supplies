# No longer using `h` function

We are using Snabbdom to render virtual nodes to the DOM. Generally,
when using Snabbdom, you use a function called `h` to generate the
virtual nodes. This is fine, of course, but Snabbdom makes `h` more
flexible than we actually need. And when we want to restrict some
of the types supplied to `h` we end up running into Typescript type
errors because something generated by `h` could have other types
than our restricted subset.

For example, we want to say that a `key` attribute associated with an
element -- which will be used to identify the virtual node and
efficiently update lists of such nodes -- should only ever be a string.
We can do that because we supply a `key` function that generates a
`ViewAttribute` which is the only way to supply an attribute to an
element. But Snabbdom allows a key to be `string | number`. So when we
use `h` that generates a virtual node that has a `key` property that is
either `string | number`, but this conflicts with what we want the `View`
type to be, namely an object with a `key` property that is only a string.

### Decision

It turns out though that Snabbdom just uses javascript objects under the
hood -- this is what the `h` function generates -- and so we will create these
ourselves 'by hand', so to speak. That allows us to have full control of the
types (so long as they are consistent with what Snabbdom expects).

It's a good thing to specify our own types for the `View` object as it
starts to put a layer of indirection between our framework and Snabbdom, in
case we need to change or have alternative renderers at some point.
We could go further even: Right now we generate an object that is consistent
with what Snabbdom expects, but we could create a distinct type and
translate it into what Snabbdom expects when necessary. The downside there
would be some extra overhead, so we will hold off on that for now.

### Caveats

We might have to continue to watch the development of the
`h` function in the Snabbdom codebase. One thing it does is add namespaces
for SVG elements and so we have not implemented that part yet. Any logic
that is in `h`, we will need to be aware of and potentially implement
ourselves going forward.